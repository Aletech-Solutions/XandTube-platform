{
  "info": {
    "name": "XandTube API v2",
    "description": "API completa do XandTube - Clone do YouTube com autenticação e download\n\nEsta coleção contém todos os endpoints disponíveis na API do XandTube v2.\n\n**Base URL:** http://localhost:3001/api\n\n**Novas Funcionalidades v2:**\n- Sistema de autenticação JWT\n- Download de vídeos do YouTube com YT-DLP\n- Progresso em tempo real via WebSocket\n- Banco de dados SQLite com Sequelize\n- Models relacionais completos\n\n**Funcionalidades existentes:**\n- Gerenciamento de vídeos (CRUD)\n- Gerenciamento de canais (CRUD)\n- Sistema de comentários\n- Upload de arquivos\n- Likes e dislikes\n- Inscrições em canais\n\n**Versão:** 2.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('authToken', response.token);",
                  "    pm.environment.set('userId', response.user.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"johndoe\",\n  \"email\": \"john@example.com\",\n  \"password\": \"senha123\",\n  \"fullName\": \"John Doe\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            },
            "description": "Registra um novo usuário no sistema"
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('authToken', response.token);",
                  "    pm.environment.set('userId', response.user.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emailOrUsername\": \"john@example.com\",\n  \"password\": \"senha123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Faz login com email/username e senha"
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "me"]
            },
            "description": "Obtém dados do usuário autenticado"
          }
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"John Doe Updated\",\n  \"avatarUrl\": \"https://example.com/avatar.jpg\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "me"]
            },
            "description": "Atualiza perfil do usuário"
          }
        },
        {
          "name": "Change Password",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"senha123\",\n  \"newPassword\": \"novaSenha123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/change-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "change-password"]
            },
            "description": "Altera senha do usuário"
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            },
            "description": "Faz logout (informativo)"
          }
        }
      ]
    },
    {
      "name": "Download",
      "item": [
        {
          "name": "Test YT-DLP",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/download/test?url=https://www.youtube.com/watch?v=dQw4w9WgXcQ",
              "host": ["{{baseUrl}}"],
              "path": ["download", "test"],
              "query": [
                {
                  "key": "url",
                  "value": "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
                }
              ]
            },
            "description": "Testa se o YT-DLP está funcionando corretamente (endpoint de debug)"
          }
        },
        {
          "name": "Get Video Info",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/download/info?url=https://www.youtube.com/watch?v=dQw4w9WgXcQ",
              "host": ["{{baseUrl}}"],
              "path": ["download", "info"],
              "query": [
                {
                  "key": "url",
                  "value": "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
                }
              ]
            },
            "description": "Obtém informações de um vídeo ou playlist do YouTube"
          }
        },
        {
          "name": "Get Available Formats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/download/formats?url=https://www.youtube.com/watch?v=dQw4w9WgXcQ",
              "host": ["{{baseUrl}}"],
              "path": ["download", "formats"],
              "query": [
                {
                  "key": "url",
                  "value": "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
                }
              ]
            },
            "description": "Lista formatos disponíveis para download"
          }
        },
        {
          "name": "Download Video",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('downloadId', response.downloadId);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n  \"quality\": \"best\",\n  \"saveToLibrary\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/download/video",
              "host": ["{{baseUrl}}"],
              "path": ["download", "video"]
            },
            "description": "Baixa um vídeo do YouTube"
          }
        },
        {
          "name": "Download Playlist",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('downloadId', response.downloadId);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"url\": \"https://www.youtube.com/playlist?list=PLrAXtmErZgOeiKm4sgNOknGvNjby9efdf\",\n  \"quality\": \"720p\",\n  \"saveToLibrary\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/download/playlist",
              "host": ["{{baseUrl}}"],
              "path": ["download", "playlist"]
            },
            "description": "Baixa uma playlist inteira do YouTube"
          }
        },
        {
          "name": "Get Download Progress",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/download/progress/{{downloadId}}",
              "host": ["{{baseUrl}}"],
              "path": ["download", "progress", "{{downloadId}}"]
            },
            "description": "Obtém progresso de um download em andamento"
          }
        },
        {
          "name": "Cancel Download",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/download/cancel/{{downloadId}}",
              "host": ["{{baseUrl}}"],
              "path": ["download", "cancel", "{{downloadId}}"]
            },
            "description": "Cancela um download em andamento"
          }
        },
        {
          "name": "Get Download History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/download/history",
              "host": ["{{baseUrl}}"],
              "path": ["download", "history"]
            },
            "description": "Obtém histórico de downloads do usuário"
          }
        }
      ]
    },
    {
      "name": "Downloads Gerenciados",
      "item": [
        {
          "name": "List Downloads",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/downloads?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["downloads"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "Lista downloads do usuário com paginação"
          }
        },
        {
          "name": "List All Downloads (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/downloads/all?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["downloads", "all"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "Lista todos os downloads (admin) com paginação"
          }
        },
        {
          "name": "Get Download Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/downloads/stats",
              "host": ["{{baseUrl}}"],
              "path": ["downloads", "stats"]
            },
            "description": "Obtém estatísticas dos downloads do usuário"
          }
        },
        {
          "name": "Scan Downloads Folder",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/downloads/scan",
              "host": ["{{baseUrl}}"],
              "path": ["downloads", "scan"]
            },
            "description": "Escaneia pasta de downloads e registra arquivos não catalogados"
          }
        },
        {
          "name": "Get Download Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/downloads/{{downloadId}}",
              "host": ["{{baseUrl}}"],
              "path": ["downloads", "{{downloadId}}"]
            },
            "description": "Obtém detalhes de um download específico"
          }
        },
        {
          "name": "Delete Download (History Only)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/downloads/{{downloadId}}",
              "host": ["{{baseUrl}}"],
              "path": ["downloads", "{{downloadId}}"]
            },
            "description": "Remove download do histórico (mantém arquivos)"
          }
        },
        {
          "name": "Delete Download and Files",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/downloads/{{downloadId}}/files",
              "host": ["{{baseUrl}}"],
              "path": ["downloads", "{{downloadId}}", "files"]
            },
            "description": "Remove download e seus arquivos físicos"
          }
        },
        {
          "name": "Stream Video",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/downloads/{{downloadId}}/stream",
              "host": ["{{baseUrl}}"],
              "path": ["downloads", "{{downloadId}}", "stream"]
            },
            "description": "Faz stream do arquivo de vídeo baixado"
          }
        },
        {
          "name": "Get Thumbnail",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/downloads/{{downloadId}}/thumbnail",
              "host": ["{{baseUrl}}"],
              "path": ["downloads", "{{downloadId}}", "thumbnail"]
            },
            "description": "Obtém thumbnail do download"
          }
        },
        {
          "name": "Convert Download to Video",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/downloads/{{downloadId}}/convert-to-video",
              "host": ["{{baseUrl}}"],
              "path": ["downloads", "{{downloadId}}", "convert-to-video"]
            },
            "description": "Converte download em vídeo do sistema"
          }
        },
        {
          "name": "Convert Multiple Downloads",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"downloadIds\": [1, 2, 3]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/downloads/convert-multiple",
              "host": ["{{baseUrl}}"],
              "path": ["downloads", "convert-multiple"]
            },
            "description": "Converte múltiplos downloads em vídeos do sistema"
          }
        }
      ]
    },
    {
      "name": "Health Check",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            },
            "description": "Verifica se a API está funcionando corretamente"
          }
        }
      ]
    },
    {
      "name": "Videos",
      "item": [
        {
          "name": "Get All Videos",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/videos?page=1&limit=12&search=&channelId=",
              "host": ["{{baseUrl}}"],
              "path": ["videos"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "12"
                },
                {
                  "key": "search",
                  "value": ""
                },
                {
                  "key": "channelId",
                  "value": ""
                }
              ]
            },
            "description": "Lista todos os vídeos com paginação e filtros"
          }
        },
        {
          "name": "Get Video by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/videos/{{videoId}}",
              "host": ["{{baseUrl}}"],
              "path": ["videos", "{{videoId}}"]
            },
            "description": "Obtém detalhes de um vídeo específico"
          }
        },
        {
          "name": "Upload Video",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "video",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "title",
                  "value": "Meu Novo Vídeo",
                  "type": "text"
                },
                {
                  "key": "description",
                  "value": "Descrição do vídeo",
                  "type": "text"
                },
                {
                  "key": "channelId",
                  "value": "{{channelId}}",
                  "type": "text"
                },
                {
                  "key": "tags",
                  "value": "tag1,tag2,tag3",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/videos",
              "host": ["{{baseUrl}}"],
              "path": ["videos"]
            },
            "description": "Faz upload de um novo vídeo"
          }
        },
        {
          "name": "Update Video",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Título Atualizado\",\n  \"description\": \"Descrição atualizada\",\n  \"tags\": [\"nova\", \"tag\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/videos/{{videoId}}",
              "host": ["{{baseUrl}}"],
              "path": ["videos", "{{videoId}}"]
            },
            "description": "Atualiza informações de um vídeo"
          }
        },
        {
          "name": "Delete Video",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/videos/{{videoId}}",
              "host": ["{{baseUrl}}"],
              "path": ["videos", "{{videoId}}"]
            },
            "description": "Remove um vídeo"
          }
        },
        {
          "name": "Like Video",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/videos/{{videoId}}/like",
              "host": ["{{baseUrl}}"],
              "path": ["videos", "{{videoId}}", "like"]
            },
            "description": "Adiciona um like ao vídeo"
          }
        },
        {
          "name": "Dislike Video",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/videos/{{videoId}}/dislike",
              "host": ["{{baseUrl}}"],
              "path": ["videos", "{{videoId}}", "dislike"]
            },
            "description": "Adiciona um dislike ao vídeo"
          }
        }
      ]
    },
    {
      "name": "Channels",
      "item": [
        {
          "name": "Get All Channels",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/channels?page=1&limit=10&search=",
              "host": ["{{baseUrl}}"],
              "path": ["channels"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "search",
                  "value": ""
                }
              ]
            },
            "description": "Lista todos os canais com paginação"
          }
        },
        {
          "name": "Get Channel by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/channels/{{channelId}}",
              "host": ["{{baseUrl}}"],
              "path": ["channels", "{{channelId}}"]
            },
            "description": "Obtém detalhes de um canal específico"
          }
        },
        {
          "name": "Create Channel",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('channelId', response.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Meu Canal Incrível\",\n  \"description\": \"Este é um canal sobre tecnologia e programação\",\n  \"customUrl\": \"meu-canal-incrivel\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/channels",
              "host": ["{{baseUrl}}"],
              "path": ["channels"]
            },
            "description": "Cria um novo canal"
          }
        },
        {
          "name": "Update Channel",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Canal Atualizado\",\n  \"description\": \"Nova descrição do canal\",\n  \"bannerUrl\": \"https://example.com/banner.jpg\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/channels/{{channelId}}",
              "host": ["{{baseUrl}}"],
              "path": ["channels", "{{channelId}}"]
            },
            "description": "Atualiza informações de um canal"
          }
        },
        {
          "name": "Delete Channel",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/channels/{{channelId}}",
              "host": ["{{baseUrl}}"],
              "path": ["channels", "{{channelId}}"]
            },
            "description": "Remove um canal e todos seus vídeos"
          }
        },
        {
          "name": "Subscribe to Channel",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/channels/{{channelId}}/subscribe",
              "host": ["{{baseUrl}}"],
              "path": ["channels", "{{channelId}}", "subscribe"]
            },
            "description": "Inscreve-se em um canal"
          }
        },
        {
          "name": "Unsubscribe from Channel",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/channels/{{channelId}}/unsubscribe",
              "host": ["{{baseUrl}}"],
              "path": ["channels", "{{channelId}}", "unsubscribe"]
            },
            "description": "Cancela inscrição em um canal"
          }
        }
      ]
    },
    {
      "name": "Comments",
      "item": [
        {
          "name": "Get Video Comments",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/comments/{{videoId}}?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["comments", "{{videoId}}"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "Lista comentários de um vídeo"
          }
        },
        {
          "name": "Create Comment",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('commentId', response.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"videoId\": \"{{videoId}}\",\n  \"content\": \"Ótimo vídeo! Muito bem explicado.\",\n  \"parentId\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/comments",
              "host": ["{{baseUrl}}"],
              "path": ["comments"]
            },
            "description": "Adiciona um comentário a um vídeo"
          }
        },
        {
          "name": "Like Comment",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/comments/{{commentId}}/like",
              "host": ["{{baseUrl}}"],
              "path": ["comments", "{{commentId}}", "like"]
            },
            "description": "Adiciona um like ao comentário"
          }
        },
        {
          "name": "Dislike Comment",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/comments/{{commentId}}/dislike",
              "host": ["{{baseUrl}}"],
              "path": ["comments", "{{commentId}}", "dislike"]
            },
            "description": "Adiciona um dislike ao comentário"
          }
        },
        {
          "name": "Delete Comment",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/comments/{{commentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["comments", "{{commentId}}"]
            },
            "description": "Remove um comentário"
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3001/api",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "videoId",
      "value": "",
      "type": "string"
    },
    {
      "key": "channelId",
      "value": "",
      "type": "string"
    },
    {
      "key": "commentId",
      "value": "",
      "type": "string"
    },
    {
      "key": "downloadId",
      "value": "",
      "type": "string"
    }
  ]
}