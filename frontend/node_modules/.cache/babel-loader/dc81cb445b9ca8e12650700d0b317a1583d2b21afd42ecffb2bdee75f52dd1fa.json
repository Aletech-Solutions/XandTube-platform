{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\keyce\\\\XandNet Project\\\\XandTube\\\\frontend\\\\src\\\\pages\\\\DownloadPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { FaYoutube, FaDownload, FaSpinner, FaCheck, FaTimes, FaVideo, FaList, FaClock, FaEye, FaFolder, FaInfoCircle } from 'react-icons/fa';\nimport api from '../services/api';\nimport Header from '../components/Header';\nimport Sidebar from '../components/Sidebar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PageContainer = styled.div`\n  display: flex;\n  background-color: #f9f9f9;\n  min-height: 100vh;\n`;\n_c = PageContainer;\nconst MainContent = styled.main`\n  flex: 1;\n  margin-left: ${props => props.sidebarOpen ? '240px' : '72px'};\n  margin-top: 56px;\n  padding: 20px;\n  transition: margin-left 0.3s;\n\n  @media (max-width: 768px) {\n    margin-left: 0;\n    padding: 10px;\n  }\n`;\n_c2 = MainContent;\nconst DownloadContainer = styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n`;\n_c3 = DownloadContainer;\nconst Title = styled.h1`\n  color: #212121;\n  margin-bottom: 30px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  \n  svg {\n    color: #FF0000;\n  }\n`;\n_c4 = Title;\nconst UrlInputSection = styled.div`\n  background: white;\n  padding: 30px;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  margin-bottom: 30px;\n`;\n_c5 = UrlInputSection;\nconst InputGroup = styled.div`\n  display: flex;\n  gap: 15px;\n  margin-bottom: 20px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n_c6 = InputGroup;\nconst UrlInput = styled.input`\n  flex: 1;\n  padding: 12px 20px;\n  border: 2px solid #e0e0e0;\n  border-radius: 25px;\n  font-size: 16px;\n  transition: border-color 0.3s;\n  \n  &:focus {\n    outline: none;\n    border-color: #FF0000;\n  }\n  \n  &::placeholder {\n    color: #999;\n  }\n`;\n_c7 = UrlInput;\nconst AnalyzeButton = styled.button`\n  background: #FF0000;\n  color: white;\n  padding: 12px 30px;\n  border: none;\n  border-radius: 25px;\n  font-size: 16px;\n  font-weight: bold;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  transition: background-color 0.3s;\n  \n  &:hover {\n    background: #cc0000;\n  }\n  \n  &:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n  }\n`;\n_c8 = AnalyzeButton;\nconst VideoInfo = styled.div`\n  background: white;\n  padding: 30px;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  margin-bottom: 30px;\n`;\n_c9 = VideoInfo;\nconst VideoHeader = styled.div`\n  display: flex;\n  gap: 20px;\n  margin-bottom: 20px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n_c0 = VideoHeader;\nconst Thumbnail = styled.img`\n  width: 320px;\n  height: 180px;\n  object-fit: cover;\n  border-radius: 8px;\n  \n  @media (max-width: 768px) {\n    width: 100%;\n    height: auto;\n  }\n`;\n_c1 = Thumbnail;\nconst VideoDetails = styled.div`\n  flex: 1;\n  \n  h2 {\n    color: #212121;\n    margin: 0 0 10px 0;\n    font-size: 20px;\n  }\n  \n  p {\n    color: #606060;\n    margin: 5px 0;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    \n    svg {\n      color: #909090;\n    }\n  }\n`;\n_c10 = VideoDetails;\nconst Description = styled.div`\n  color: #606060;\n  line-height: 1.6;\n  max-height: 100px;\n  overflow-y: auto;\n  padding: 15px;\n  background: #f9f9f9;\n  border-radius: 8px;\n  margin-top: 15px;\n`;\n_c11 = Description;\nconst QualitySection = styled.div`\n  margin-top: 20px;\n  \n  h3 {\n    color: #212121;\n    margin-bottom: 15px;\n  }\n`;\n_c12 = QualitySection;\nconst QualityOptions = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n  gap: 10px;\n`;\n_c13 = QualityOptions;\nconst QualityOption = styled.label`\n  display: flex;\n  align-items: center;\n  padding: 10px 15px;\n  border: 2px solid ${props => props.selected ? '#FF0000' : '#e0e0e0'};\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s;\n  background: ${props => props.selected ? '#fff5f5' : 'white'};\n  \n  &:hover {\n    border-color: #FF0000;\n  }\n  \n  input {\n    margin-right: 8px;\n  }\n  \n  span {\n    color: #212121;\n    font-weight: ${props => props.selected ? 'bold' : 'normal'};\n  }\n`;\n_c14 = QualityOption;\nconst DownloadOptions = styled.div`\n  display: flex;\n  gap: 15px;\n  margin-top: 20px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n_c15 = DownloadOptions;\nconst DownloadButton = styled.button`\n  flex: 1;\n  background: ${props => props.primary ? '#FF0000' : 'white'};\n  color: ${props => props.primary ? 'white' : '#FF0000'};\n  padding: 12px 30px;\n  border: 2px solid #FF0000;\n  border-radius: 25px;\n  font-size: 16px;\n  font-weight: bold;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  transition: all 0.3s;\n  \n  &:hover {\n    background: ${props => props.primary ? '#cc0000' : '#fff5f5'};\n  }\n  \n  &:disabled {\n    background: #ccc;\n    border-color: #ccc;\n    color: white;\n    cursor: not-allowed;\n  }\n`;\n_c16 = DownloadButton;\nconst ProgressSection = styled.div`\n  background: white;\n  padding: 30px;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  margin-bottom: 30px;\n`;\n_c17 = ProgressSection;\nconst ProgressBar = styled.div`\n  width: 100%;\n  height: 30px;\n  background: #f0f0f0;\n  border-radius: 15px;\n  overflow: hidden;\n  margin: 20px 0;\n`;\n_c18 = ProgressBar;\nconst ProgressFill = styled.div`\n  height: 100%;\n  background: linear-gradient(90deg, #FF0000 0%, #ff4444 100%);\n  width: ${props => props.progress}%;\n  transition: width 0.3s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-weight: bold;\n`;\n_c19 = ProgressFill;\nconst ProgressInfo = styled.div`\n  display: flex;\n  justify-content: space-between;\n  color: #606060;\n  \n  span {\n    display: flex;\n    align-items: center;\n    gap: 5px;\n  }\n`;\n_c20 = ProgressInfo;\nconst PlaylistInfo = styled.div`\n  background: #fff5f5;\n  border: 2px solid #FF0000;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 20px;\n  \n  h3 {\n    color: #FF0000;\n    margin: 0 0 10px 0;\n    display: flex;\n    align-items: center;\n    gap: 10px;\n  }\n  \n  p {\n    color: #606060;\n    margin: 5px 0;\n  }\n`;\n_c21 = PlaylistInfo;\nconst VideoList = styled.div`\n  max-height: 300px;\n  overflow-y: auto;\n  margin-top: 15px;\n  padding: 10px;\n  background: white;\n  border-radius: 8px;\n`;\n_c22 = VideoList;\nconst VideoItem = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px;\n  border-bottom: 1px solid #f0f0f0;\n  \n  &:last-child {\n    border-bottom: none;\n  }\n  \n  img {\n    width: 80px;\n    height: 45px;\n    object-fit: cover;\n    border-radius: 4px;\n  }\n  \n  div {\n    flex: 1;\n    \n    h4 {\n      color: #212121;\n      font-size: 14px;\n      margin: 0;\n    }\n    \n    p {\n      color: #606060;\n      font-size: 12px;\n      margin: 2px 0;\n    }\n  }\n`;\n_c23 = VideoItem;\nconst ErrorMessage = styled.div`\n  background: #ffebee;\n  color: #c62828;\n  padding: 15px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  \n  svg {\n    font-size: 20px;\n  }\n`;\n_c24 = ErrorMessage;\nconst InfoMessage = styled.div`\n  background: #e3f2fd;\n  color: #1565c0;\n  padding: 15px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  \n  svg {\n    font-size: 20px;\n  }\n`;\n_c25 = InfoMessage;\nfunction DownloadPage() {\n  _s();\n  const navigate = useNavigate();\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [url, setUrl] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [videoInfo, setVideoInfo] = useState(null);\n  const [selectedQuality, setSelectedQuality] = useState('best');\n  const [downloading, setDownloading] = useState(false);\n  const [downloadProgress, setDownloadProgress] = useState(0);\n  const [downloadId, setDownloadId] = useState(null);\n  const [error, setError] = useState('');\n  const [saveToLibrary, setSaveToLibrary] = useState(true);\n  const wsRef = useRef(null);\n  const progressIntervalRef = useRef(null);\n\n  // Verifica autenticação\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n    }\n  }, [navigate]);\n\n  // Limpa ao desmontar\n  useEffect(() => {\n    return () => {\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n      if (progressIntervalRef.current) {\n        clearInterval(progressIntervalRef.current);\n      }\n    };\n  }, []);\n\n  // Conecta WebSocket para progresso em tempo real\n  const connectWebSocket = downloadId => {\n    const wsUrl = `ws://localhost:3001`;\n    wsRef.current = new WebSocket(wsUrl);\n    wsRef.current.onopen = () => {\n      console.log('WebSocket conectado');\n      wsRef.current.send(JSON.stringify({\n        type: 'subscribe',\n        downloadId: downloadId\n      }));\n    };\n    wsRef.current.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.downloadId === downloadId) {\n        setDownloadProgress(data.progress);\n      }\n    };\n    wsRef.current.onerror = error => {\n      console.error('Erro WebSocket:', error);\n    };\n  };\n\n  // Polling alternativo para progresso\n  const startProgressPolling = downloadId => {\n    progressIntervalRef.current = setInterval(async () => {\n      try {\n        const response = await api.get(`/download/progress/${downloadId}`);\n        const {\n          progress,\n          status\n        } = response.data;\n        setDownloadProgress(progress);\n        if (status === 'completed') {\n          clearInterval(progressIntervalRef.current);\n          setDownloading(false);\n          console.log('Download completo!');\n          setError('');\n          setUrl('');\n          setVideoInfo(null);\n        } else if (status === 'error') {\n          clearInterval(progressIntervalRef.current);\n          setDownloading(false);\n          setError(response.data.error || 'Erro no download');\n        }\n      } catch (error) {\n        console.error('Erro ao verificar progresso:', error);\n      }\n    }, 1000);\n  };\n  const handleAnalyze = async () => {\n    if (!url.trim()) {\n      setError('Por favor, insira uma URL do YouTube');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    setVideoInfo(null);\n    try {\n      const response = await api.get('/download/info', {\n        params: {\n          url\n        }\n      });\n      setVideoInfo(response.data);\n      console.log('Informações do vídeo obtidas com sucesso');\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Erro ao analisar URL:', error);\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Erro ao analisar URL');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleDownload = async (downloadPlaylist = false) => {\n    setDownloading(true);\n    setError('');\n    setDownloadProgress(0);\n    try {\n      const endpoint = downloadPlaylist ? '/download/playlist' : '/download/video';\n      const response = await api.post(endpoint, {\n        url,\n        quality: selectedQuality,\n        saveToLibrary\n      });\n      const {\n        downloadId\n      } = response.data;\n      setDownloadId(downloadId);\n\n      // Tenta conectar WebSocket primeiro\n      try {\n        connectWebSocket(downloadId);\n      } catch (wsError) {\n        console.error('WebSocket não disponível, usando polling:', wsError);\n      }\n\n      // Sempre usa polling como backup\n      startProgressPolling(downloadId);\n      console.log('Download iniciado');\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Erro ao iniciar download:', error);\n      setError(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'Erro ao iniciar download');\n      setDownloading(false);\n    }\n  };\n  const formatDuration = seconds => {\n    if (!seconds) return 'N/A';\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor(seconds % 3600 / 60);\n    const secs = seconds % 60;\n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n    }\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\n  };\n  const formatViews = views => {\n    if (!views) return 'N/A';\n    if (views >= 1000000) {\n      return `${(views / 1000000).toFixed(1)}M visualizações`;\n    } else if (views >= 1000) {\n      return `${(views / 1000).toFixed(1)}K visualizações`;\n    }\n    return `${views} visualizações`;\n  };\n  return /*#__PURE__*/_jsxDEV(PageContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      sidebarOpen: sidebarOpen,\n      setSidebarOpen: setSidebarOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Sidebar, {\n      isOpen: sidebarOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 555,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MainContent, {\n      sidebarOpen: sidebarOpen,\n      children: /*#__PURE__*/_jsxDEV(DownloadContainer, {\n        children: [/*#__PURE__*/_jsxDEV(Title, {\n          children: [/*#__PURE__*/_jsxDEV(FaDownload, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 13\n          }, this), \"Baixar V\\xEDdeos do YouTube\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InfoMessage, {\n          children: [/*#__PURE__*/_jsxDEV(FaInfoCircle, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this), \"Use esta ferramenta para baixar v\\xEDdeos e playlists do YouTube. Os v\\xEDdeos ser\\xE3o salvos em sua biblioteca pessoal.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(UrlInputSection, {\n          children: /*#__PURE__*/_jsxDEV(InputGroup, {\n            children: [/*#__PURE__*/_jsxDEV(UrlInput, {\n              type: \"text\",\n              placeholder: \"Cole a URL do v\\xEDdeo ou playlist do YouTube aqui...\",\n              value: url,\n              onChange: e => setUrl(e.target.value),\n              onKeyPress: e => e.key === 'Enter' && handleAnalyze(),\n              disabled: loading || downloading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(AnalyzeButton, {\n              onClick: handleAnalyze,\n              disabled: loading || downloading || !url.trim(),\n              children: [loading ? /*#__PURE__*/_jsxDEV(FaSpinner, {\n                className: \"spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 28\n              }, this) : /*#__PURE__*/_jsxDEV(FaYoutube, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 61\n              }, this), loading ? 'Analisando...' : 'Analisar']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          children: [/*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 15\n          }, this), error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 13\n        }, this), videoInfo && videoInfo.type === 'video' && /*#__PURE__*/_jsxDEV(VideoInfo, {\n          children: [/*#__PURE__*/_jsxDEV(VideoHeader, {\n            children: [/*#__PURE__*/_jsxDEV(Thumbnail, {\n              src: videoInfo.thumbnail,\n              alt: videoInfo.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 599,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(VideoDetails, {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: videoInfo.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(FaVideo, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 603,\n                  columnNumber: 21\n                }, this), \"Canal: \", videoInfo.channelName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(FaClock, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 607,\n                  columnNumber: 21\n                }, this), \"Dura\\xE7\\xE3o: \", formatDuration(videoInfo.duration)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(FaEye, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 611,\n                  columnNumber: 21\n                }, this), formatViews(videoInfo.viewCount)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 610,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 600,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 15\n          }, this), videoInfo.description && /*#__PURE__*/_jsxDEV(Description, {\n            children: videoInfo.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(QualitySection, {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Qualidade do Download\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 622,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(QualityOptions, {\n              children: [/*#__PURE__*/_jsxDEV(QualityOption, {\n                selected: selectedQuality === 'best',\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"quality\",\n                  value: \"best\",\n                  checked: selectedQuality === 'best',\n                  onChange: e => setSelectedQuality(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 625,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Melhor Qualidade\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 632,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 624,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(QualityOption, {\n                selected: selectedQuality === '1080p',\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"quality\",\n                  value: \"1080p\",\n                  checked: selectedQuality === '1080p',\n                  onChange: e => setSelectedQuality(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 635,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"1080p (Full HD)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 642,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(QualityOption, {\n                selected: selectedQuality === '720p',\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"quality\",\n                  value: \"720p\",\n                  checked: selectedQuality === '720p',\n                  onChange: e => setSelectedQuality(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 645,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"720p (HD)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 652,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 644,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(QualityOption, {\n                selected: selectedQuality === '480p',\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"quality\",\n                  value: \"480p\",\n                  checked: selectedQuality === '480p',\n                  onChange: e => setSelectedQuality(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 655,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"480p\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 662,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 621,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(DownloadOptions, {\n            children: [/*#__PURE__*/_jsxDEV(DownloadButton, {\n              primary: true,\n              onClick: () => handleDownload(false),\n              disabled: downloading,\n              children: [/*#__PURE__*/_jsxDEV(FaDownload, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 19\n              }, this), downloading ? 'Baixando...' : 'Baixar Vídeo']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(DownloadButton, {\n              onClick: () => setSaveToLibrary(!saveToLibrary),\n              disabled: downloading,\n              children: [/*#__PURE__*/_jsxDEV(FaFolder, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 680,\n                columnNumber: 19\n              }, this), saveToLibrary ? 'Salvar na Biblioteca' : 'Apenas Baixar']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 667,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 13\n        }, this), videoInfo && videoInfo.type === 'playlist' && /*#__PURE__*/_jsxDEV(VideoInfo, {\n          children: [/*#__PURE__*/_jsxDEV(PlaylistInfo, {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [/*#__PURE__*/_jsxDEV(FaList, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 19\n              }, this), \"Playlist: \", videoInfo.title]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Total de v\\xEDdeos: \", videoInfo.totalVideos]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(VideoList, {\n            children: videoInfo.videos.map((video, index) => /*#__PURE__*/_jsxDEV(VideoItem, {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: video.thumbnail,\n                alt: video.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 700,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: [index + 1, \". \", video.title]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 702,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Dura\\xE7\\xE3o: \", formatDuration(video.duration)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 703,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 701,\n                columnNumber: 21\n              }, this)]\n            }, video.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 699,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(QualitySection, {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Qualidade do Download\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 710,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(QualityOptions, {\n              children: [/*#__PURE__*/_jsxDEV(QualityOption, {\n                selected: selectedQuality === 'best',\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"quality\",\n                  value: \"best\",\n                  checked: selectedQuality === 'best',\n                  onChange: e => setSelectedQuality(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 713,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Melhor Qualidade\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 720,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 712,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(QualityOption, {\n                selected: selectedQuality === '720p',\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"quality\",\n                  value: \"720p\",\n                  checked: selectedQuality === '720p',\n                  onChange: e => setSelectedQuality(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 723,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"720p (HD)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 730,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 722,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(QualityOption, {\n                selected: selectedQuality === '480p',\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"quality\",\n                  value: \"480p\",\n                  checked: selectedQuality === '480p',\n                  onChange: e => setSelectedQuality(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 733,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"480p\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 740,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 732,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 711,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 709,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(DownloadOptions, {\n            children: [/*#__PURE__*/_jsxDEV(DownloadButton, {\n              primary: true,\n              onClick: () => handleDownload(true),\n              disabled: downloading,\n              children: [/*#__PURE__*/_jsxDEV(FaDownload, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 751,\n                columnNumber: 19\n              }, this), downloading ? 'Baixando Playlist...' : 'Baixar Toda a Playlist']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 746,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(DownloadButton, {\n              onClick: () => setSaveToLibrary(!saveToLibrary),\n              disabled: downloading,\n              children: [/*#__PURE__*/_jsxDEV(FaFolder, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 758,\n                columnNumber: 19\n              }, this), saveToLibrary ? 'Salvar na Biblioteca' : 'Apenas Baixar']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 754,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 745,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 688,\n          columnNumber: 13\n        }, this), downloading && /*#__PURE__*/_jsxDEV(ProgressSection, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Progresso do Download\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 767,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n            children: /*#__PURE__*/_jsxDEV(ProgressFill, {\n              progress: downloadProgress,\n              children: [downloadProgress.toFixed(0), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 769,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 768,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ProgressInfo, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(FaSpinner, {\n                className: \"spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 775,\n                columnNumber: 19\n              }, this), \"Baixando...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 774,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [downloadProgress.toFixed(0), \"% completo\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 773,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 766,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 553,\n    columnNumber: 5\n  }, this);\n}\n_s(DownloadPage, \"kWDMnxcWVCaahOGOIbFLHvMjubc=\", false, function () {\n  return [useNavigate];\n});\n_c26 = DownloadPage;\nexport default DownloadPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22, _c23, _c24, _c25, _c26;\n$RefreshReg$(_c, \"PageContainer\");\n$RefreshReg$(_c2, \"MainContent\");\n$RefreshReg$(_c3, \"DownloadContainer\");\n$RefreshReg$(_c4, \"Title\");\n$RefreshReg$(_c5, \"UrlInputSection\");\n$RefreshReg$(_c6, \"InputGroup\");\n$RefreshReg$(_c7, \"UrlInput\");\n$RefreshReg$(_c8, \"AnalyzeButton\");\n$RefreshReg$(_c9, \"VideoInfo\");\n$RefreshReg$(_c0, \"VideoHeader\");\n$RefreshReg$(_c1, \"Thumbnail\");\n$RefreshReg$(_c10, \"VideoDetails\");\n$RefreshReg$(_c11, \"Description\");\n$RefreshReg$(_c12, \"QualitySection\");\n$RefreshReg$(_c13, \"QualityOptions\");\n$RefreshReg$(_c14, \"QualityOption\");\n$RefreshReg$(_c15, \"DownloadOptions\");\n$RefreshReg$(_c16, \"DownloadButton\");\n$RefreshReg$(_c17, \"ProgressSection\");\n$RefreshReg$(_c18, \"ProgressBar\");\n$RefreshReg$(_c19, \"ProgressFill\");\n$RefreshReg$(_c20, \"ProgressInfo\");\n$RefreshReg$(_c21, \"PlaylistInfo\");\n$RefreshReg$(_c22, \"VideoList\");\n$RefreshReg$(_c23, \"VideoItem\");\n$RefreshReg$(_c24, \"ErrorMessage\");\n$RefreshReg$(_c25, \"InfoMessage\");\n$RefreshReg$(_c26, \"DownloadPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","styled","FaYoutube","FaDownload","FaSpinner","FaCheck","FaTimes","FaVideo","FaList","FaClock","FaEye","FaFolder","FaInfoCircle","api","Header","Sidebar","jsxDEV","_jsxDEV","PageContainer","div","_c","MainContent","main","props","sidebarOpen","_c2","DownloadContainer","_c3","Title","h1","_c4","UrlInputSection","_c5","InputGroup","_c6","UrlInput","input","_c7","AnalyzeButton","button","_c8","VideoInfo","_c9","VideoHeader","_c0","Thumbnail","img","_c1","VideoDetails","_c10","Description","_c11","QualitySection","_c12","QualityOptions","_c13","QualityOption","label","selected","_c14","DownloadOptions","_c15","DownloadButton","primary","_c16","ProgressSection","_c17","ProgressBar","_c18","ProgressFill","progress","_c19","ProgressInfo","_c20","PlaylistInfo","_c21","VideoList","_c22","VideoItem","_c23","ErrorMessage","_c24","InfoMessage","_c25","DownloadPage","_s","navigate","setSidebarOpen","url","setUrl","loading","setLoading","videoInfo","setVideoInfo","selectedQuality","setSelectedQuality","downloading","setDownloading","downloadProgress","setDownloadProgress","downloadId","setDownloadId","error","setError","saveToLibrary","setSaveToLibrary","wsRef","progressIntervalRef","token","localStorage","getItem","current","close","clearInterval","connectWebSocket","wsUrl","WebSocket","onopen","console","log","send","JSON","stringify","type","onmessage","event","data","parse","onerror","startProgressPolling","setInterval","response","get","status","handleAnalyze","trim","params","_error$response","_error$response$data","handleDownload","downloadPlaylist","endpoint","post","quality","wsError","_error$response2","_error$response2$data","formatDuration","seconds","hours","Math","floor","minutes","secs","toString","padStart","formatViews","views","toFixed","children","fileName","_jsxFileName","lineNumber","columnNumber","isOpen","placeholder","value","onChange","e","target","onKeyPress","key","disabled","onClick","className","src","thumbnail","alt","title","channelName","duration","viewCount","description","name","checked","totalVideos","videos","map","video","index","id","_c26","$RefreshReg$"],"sources":["C:/Users/keyce/XandNet Project/XandTube/frontend/src/pages/DownloadPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport { \r\n  FaYoutube, FaDownload, FaSpinner, FaCheck, FaTimes, \r\n  FaVideo, FaList, FaClock, FaEye, FaFolder, FaInfoCircle \r\n} from 'react-icons/fa';\r\nimport api from '../services/api';\r\nimport Header from '../components/Header';\r\nimport Sidebar from '../components/Sidebar';\r\n\r\nconst PageContainer = styled.div`\r\n  display: flex;\r\n  background-color: #f9f9f9;\r\n  min-height: 100vh;\r\n`;\r\n\r\nconst MainContent = styled.main`\r\n  flex: 1;\r\n  margin-left: ${props => props.sidebarOpen ? '240px' : '72px'};\r\n  margin-top: 56px;\r\n  padding: 20px;\r\n  transition: margin-left 0.3s;\r\n\r\n  @media (max-width: 768px) {\r\n    margin-left: 0;\r\n    padding: 10px;\r\n  }\r\n`;\r\n\r\nconst DownloadContainer = styled.div`\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  color: #212121;\r\n  margin-bottom: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  \r\n  svg {\r\n    color: #FF0000;\r\n  }\r\n`;\r\n\r\nconst UrlInputSection = styled.div`\r\n  background: white;\r\n  padding: 30px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst InputGroup = styled.div`\r\n  display: flex;\r\n  gap: 15px;\r\n  margin-bottom: 20px;\r\n  \r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n  }\r\n`;\r\n\r\nconst UrlInput = styled.input`\r\n  flex: 1;\r\n  padding: 12px 20px;\r\n  border: 2px solid #e0e0e0;\r\n  border-radius: 25px;\r\n  font-size: 16px;\r\n  transition: border-color 0.3s;\r\n  \r\n  &:focus {\r\n    outline: none;\r\n    border-color: #FF0000;\r\n  }\r\n  \r\n  &::placeholder {\r\n    color: #999;\r\n  }\r\n`;\r\n\r\nconst AnalyzeButton = styled.button`\r\n  background: #FF0000;\r\n  color: white;\r\n  padding: 12px 30px;\r\n  border: none;\r\n  border-radius: 25px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  transition: background-color 0.3s;\r\n  \r\n  &:hover {\r\n    background: #cc0000;\r\n  }\r\n  \r\n  &:disabled {\r\n    background: #ccc;\r\n    cursor: not-allowed;\r\n  }\r\n`;\r\n\r\nconst VideoInfo = styled.div`\r\n  background: white;\r\n  padding: 30px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst VideoHeader = styled.div`\r\n  display: flex;\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n  \r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n  }\r\n`;\r\n\r\nconst Thumbnail = styled.img`\r\n  width: 320px;\r\n  height: 180px;\r\n  object-fit: cover;\r\n  border-radius: 8px;\r\n  \r\n  @media (max-width: 768px) {\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n`;\r\n\r\nconst VideoDetails = styled.div`\r\n  flex: 1;\r\n  \r\n  h2 {\r\n    color: #212121;\r\n    margin: 0 0 10px 0;\r\n    font-size: 20px;\r\n  }\r\n  \r\n  p {\r\n    color: #606060;\r\n    margin: 5px 0;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    \r\n    svg {\r\n      color: #909090;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Description = styled.div`\r\n  color: #606060;\r\n  line-height: 1.6;\r\n  max-height: 100px;\r\n  overflow-y: auto;\r\n  padding: 15px;\r\n  background: #f9f9f9;\r\n  border-radius: 8px;\r\n  margin-top: 15px;\r\n`;\r\n\r\nconst QualitySection = styled.div`\r\n  margin-top: 20px;\r\n  \r\n  h3 {\r\n    color: #212121;\r\n    margin-bottom: 15px;\r\n  }\r\n`;\r\n\r\nconst QualityOptions = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\r\n  gap: 10px;\r\n`;\r\n\r\nconst QualityOption = styled.label`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10px 15px;\r\n  border: 2px solid ${props => props.selected ? '#FF0000' : '#e0e0e0'};\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n  background: ${props => props.selected ? '#fff5f5' : 'white'};\r\n  \r\n  &:hover {\r\n    border-color: #FF0000;\r\n  }\r\n  \r\n  input {\r\n    margin-right: 8px;\r\n  }\r\n  \r\n  span {\r\n    color: #212121;\r\n    font-weight: ${props => props.selected ? 'bold' : 'normal'};\r\n  }\r\n`;\r\n\r\nconst DownloadOptions = styled.div`\r\n  display: flex;\r\n  gap: 15px;\r\n  margin-top: 20px;\r\n  \r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n  }\r\n`;\r\n\r\nconst DownloadButton = styled.button`\r\n  flex: 1;\r\n  background: ${props => props.primary ? '#FF0000' : 'white'};\r\n  color: ${props => props.primary ? 'white' : '#FF0000'};\r\n  padding: 12px 30px;\r\n  border: 2px solid #FF0000;\r\n  border-radius: 25px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 10px;\r\n  transition: all 0.3s;\r\n  \r\n  &:hover {\r\n    background: ${props => props.primary ? '#cc0000' : '#fff5f5'};\r\n  }\r\n  \r\n  &:disabled {\r\n    background: #ccc;\r\n    border-color: #ccc;\r\n    color: white;\r\n    cursor: not-allowed;\r\n  }\r\n`;\r\n\r\nconst ProgressSection = styled.div`\r\n  background: white;\r\n  padding: 30px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst ProgressBar = styled.div`\r\n  width: 100%;\r\n  height: 30px;\r\n  background: #f0f0f0;\r\n  border-radius: 15px;\r\n  overflow: hidden;\r\n  margin: 20px 0;\r\n`;\r\n\r\nconst ProgressFill = styled.div`\r\n  height: 100%;\r\n  background: linear-gradient(90deg, #FF0000 0%, #ff4444 100%);\r\n  width: ${props => props.progress}%;\r\n  transition: width 0.3s;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: white;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst ProgressInfo = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  color: #606060;\r\n  \r\n  span {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 5px;\r\n  }\r\n`;\r\n\r\nconst PlaylistInfo = styled.div`\r\n  background: #fff5f5;\r\n  border: 2px solid #FF0000;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n  \r\n  h3 {\r\n    color: #FF0000;\r\n    margin: 0 0 10px 0;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n  }\r\n  \r\n  p {\r\n    color: #606060;\r\n    margin: 5px 0;\r\n  }\r\n`;\r\n\r\nconst VideoList = styled.div`\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n  margin-top: 15px;\r\n  padding: 10px;\r\n  background: white;\r\n  border-radius: 8px;\r\n`;\r\n\r\nconst VideoItem = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  padding: 10px;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  \r\n  &:last-child {\r\n    border-bottom: none;\r\n  }\r\n  \r\n  img {\r\n    width: 80px;\r\n    height: 45px;\r\n    object-fit: cover;\r\n    border-radius: 4px;\r\n  }\r\n  \r\n  div {\r\n    flex: 1;\r\n    \r\n    h4 {\r\n      color: #212121;\r\n      font-size: 14px;\r\n      margin: 0;\r\n    }\r\n    \r\n    p {\r\n      color: #606060;\r\n      font-size: 12px;\r\n      margin: 2px 0;\r\n    }\r\n  }\r\n`;\r\n\r\nconst ErrorMessage = styled.div`\r\n  background: #ffebee;\r\n  color: #c62828;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  \r\n  svg {\r\n    font-size: 20px;\r\n  }\r\n`;\r\n\r\nconst InfoMessage = styled.div`\r\n  background: #e3f2fd;\r\n  color: #1565c0;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  \r\n  svg {\r\n    font-size: 20px;\r\n  }\r\n`;\r\n\r\nfunction DownloadPage() {\r\n  const navigate = useNavigate();\r\n  const [sidebarOpen, setSidebarOpen] = useState(true);\r\n  const [url, setUrl] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [videoInfo, setVideoInfo] = useState(null);\r\n  const [selectedQuality, setSelectedQuality] = useState('best');\r\n  const [downloading, setDownloading] = useState(false);\r\n  const [downloadProgress, setDownloadProgress] = useState(0);\r\n  const [downloadId, setDownloadId] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const [saveToLibrary, setSaveToLibrary] = useState(true);\r\n  const wsRef = useRef(null);\r\n  const progressIntervalRef = useRef(null);\r\n\r\n  // Verifica autenticação\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      navigate('/login');\r\n    }\r\n  }, [navigate]);\r\n\r\n  // Limpa ao desmontar\r\n  useEffect(() => {\r\n    return () => {\r\n      if (wsRef.current) {\r\n        wsRef.current.close();\r\n      }\r\n      if (progressIntervalRef.current) {\r\n        clearInterval(progressIntervalRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Conecta WebSocket para progresso em tempo real\r\n  const connectWebSocket = (downloadId) => {\r\n    const wsUrl = `ws://localhost:3001`;\r\n    wsRef.current = new WebSocket(wsUrl);\r\n\r\n    wsRef.current.onopen = () => {\r\n      console.log('WebSocket conectado');\r\n      wsRef.current.send(JSON.stringify({\r\n        type: 'subscribe',\r\n        downloadId: downloadId\r\n      }));\r\n    };\r\n\r\n    wsRef.current.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      if (data.downloadId === downloadId) {\r\n        setDownloadProgress(data.progress);\r\n      }\r\n    };\r\n\r\n    wsRef.current.onerror = (error) => {\r\n      console.error('Erro WebSocket:', error);\r\n    };\r\n  };\r\n\r\n  // Polling alternativo para progresso\r\n  const startProgressPolling = (downloadId) => {\r\n    progressIntervalRef.current = setInterval(async () => {\r\n      try {\r\n        const response = await api.get(`/download/progress/${downloadId}`);\r\n        const { progress, status } = response.data;\r\n        \r\n        setDownloadProgress(progress);\r\n        \r\n        if (status === 'completed') {\r\n          clearInterval(progressIntervalRef.current);\r\n          setDownloading(false);\r\n          console.log('Download completo!');\r\n          setError('');\r\n          setUrl('');\r\n          setVideoInfo(null);\r\n        } else if (status === 'error') {\r\n          clearInterval(progressIntervalRef.current);\r\n          setDownloading(false);\r\n          setError(response.data.error || 'Erro no download');\r\n        }\r\n      } catch (error) {\r\n        console.error('Erro ao verificar progresso:', error);\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  const handleAnalyze = async () => {\r\n    if (!url.trim()) {\r\n      setError('Por favor, insira uma URL do YouTube');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n    setVideoInfo(null);\r\n\r\n    try {\r\n      const response = await api.get('/download/info', {\r\n        params: { url }\r\n      });\r\n\r\n      setVideoInfo(response.data);\r\n      console.log('Informações do vídeo obtidas com sucesso');\r\n    } catch (error) {\r\n      console.error('Erro ao analisar URL:', error);\r\n      setError(error.response?.data?.error || 'Erro ao analisar URL');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDownload = async (downloadPlaylist = false) => {\r\n    setDownloading(true);\r\n    setError('');\r\n    setDownloadProgress(0);\r\n\r\n    try {\r\n      const endpoint = downloadPlaylist ? '/download/playlist' : '/download/video';\r\n      const response = await api.post(endpoint, {\r\n        url,\r\n        quality: selectedQuality,\r\n        saveToLibrary\r\n      });\r\n\r\n      const { downloadId } = response.data;\r\n      setDownloadId(downloadId);\r\n\r\n      // Tenta conectar WebSocket primeiro\r\n      try {\r\n        connectWebSocket(downloadId);\r\n      } catch (wsError) {\r\n        console.error('WebSocket não disponível, usando polling:', wsError);\r\n      }\r\n\r\n      // Sempre usa polling como backup\r\n      startProgressPolling(downloadId);\r\n\r\n      console.log('Download iniciado');\r\n    } catch (error) {\r\n      console.error('Erro ao iniciar download:', error);\r\n      setError(error.response?.data?.error || 'Erro ao iniciar download');\r\n      setDownloading(false);\r\n    }\r\n  };\r\n\r\n  const formatDuration = (seconds) => {\r\n    if (!seconds) return 'N/A';\r\n    const hours = Math.floor(seconds / 3600);\r\n    const minutes = Math.floor((seconds % 3600) / 60);\r\n    const secs = seconds % 60;\r\n    \r\n    if (hours > 0) {\r\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const formatViews = (views) => {\r\n    if (!views) return 'N/A';\r\n    if (views >= 1000000) {\r\n      return `${(views / 1000000).toFixed(1)}M visualizações`;\r\n    } else if (views >= 1000) {\r\n      return `${(views / 1000).toFixed(1)}K visualizações`;\r\n    }\r\n    return `${views} visualizações`;\r\n  };\r\n\r\n  return (\r\n    <PageContainer>\r\n      <Header sidebarOpen={sidebarOpen} setSidebarOpen={setSidebarOpen} />\r\n      <Sidebar isOpen={sidebarOpen} />\r\n      \r\n      <MainContent sidebarOpen={sidebarOpen}>\r\n        <DownloadContainer>\r\n          <Title>\r\n            <FaDownload />\r\n            Baixar Vídeos do YouTube\r\n          </Title>\r\n\r\n          <InfoMessage>\r\n            <FaInfoCircle />\r\n            Use esta ferramenta para baixar vídeos e playlists do YouTube. Os vídeos serão salvos em sua biblioteca pessoal.\r\n          </InfoMessage>\r\n\r\n          <UrlInputSection>\r\n            <InputGroup>\r\n              <UrlInput\r\n                type=\"text\"\r\n                placeholder=\"Cole a URL do vídeo ou playlist do YouTube aqui...\"\r\n                value={url}\r\n                onChange={(e) => setUrl(e.target.value)}\r\n                onKeyPress={(e) => e.key === 'Enter' && handleAnalyze()}\r\n                disabled={loading || downloading}\r\n              />\r\n              <AnalyzeButton \r\n                onClick={handleAnalyze} \r\n                disabled={loading || downloading || !url.trim()}\r\n              >\r\n                {loading ? <FaSpinner className=\"spin\" /> : <FaYoutube />}\r\n                {loading ? 'Analisando...' : 'Analisar'}\r\n              </AnalyzeButton>\r\n            </InputGroup>\r\n          </UrlInputSection>\r\n\r\n          {error && (\r\n            <ErrorMessage>\r\n              <FaTimes />\r\n              {error}\r\n            </ErrorMessage>\r\n          )}\r\n\r\n          {videoInfo && videoInfo.type === 'video' && (\r\n            <VideoInfo>\r\n              <VideoHeader>\r\n                <Thumbnail src={videoInfo.thumbnail} alt={videoInfo.title} />\r\n                <VideoDetails>\r\n                  <h2>{videoInfo.title}</h2>\r\n                  <p>\r\n                    <FaVideo />\r\n                    Canal: {videoInfo.channelName}\r\n                  </p>\r\n                  <p>\r\n                    <FaClock />\r\n                    Duração: {formatDuration(videoInfo.duration)}\r\n                  </p>\r\n                  <p>\r\n                    <FaEye />\r\n                    {formatViews(videoInfo.viewCount)}\r\n                  </p>\r\n                </VideoDetails>\r\n              </VideoHeader>\r\n\r\n              {videoInfo.description && (\r\n                <Description>{videoInfo.description}</Description>\r\n              )}\r\n\r\n              <QualitySection>\r\n                <h3>Qualidade do Download</h3>\r\n                <QualityOptions>\r\n                  <QualityOption selected={selectedQuality === 'best'}>\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"quality\"\r\n                      value=\"best\"\r\n                      checked={selectedQuality === 'best'}\r\n                      onChange={(e) => setSelectedQuality(e.target.value)}\r\n                    />\r\n                    <span>Melhor Qualidade</span>\r\n                  </QualityOption>\r\n                  <QualityOption selected={selectedQuality === '1080p'}>\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"quality\"\r\n                      value=\"1080p\"\r\n                      checked={selectedQuality === '1080p'}\r\n                      onChange={(e) => setSelectedQuality(e.target.value)}\r\n                    />\r\n                    <span>1080p (Full HD)</span>\r\n                  </QualityOption>\r\n                  <QualityOption selected={selectedQuality === '720p'}>\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"quality\"\r\n                      value=\"720p\"\r\n                      checked={selectedQuality === '720p'}\r\n                      onChange={(e) => setSelectedQuality(e.target.value)}\r\n                    />\r\n                    <span>720p (HD)</span>\r\n                  </QualityOption>\r\n                  <QualityOption selected={selectedQuality === '480p'}>\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"quality\"\r\n                      value=\"480p\"\r\n                      checked={selectedQuality === '480p'}\r\n                      onChange={(e) => setSelectedQuality(e.target.value)}\r\n                    />\r\n                    <span>480p</span>\r\n                  </QualityOption>\r\n                </QualityOptions>\r\n              </QualitySection>\r\n\r\n              <DownloadOptions>\r\n                <DownloadButton\r\n                  primary\r\n                  onClick={() => handleDownload(false)}\r\n                  disabled={downloading}\r\n                >\r\n                  <FaDownload />\r\n                  {downloading ? 'Baixando...' : 'Baixar Vídeo'}\r\n                </DownloadButton>\r\n                <DownloadButton\r\n                  onClick={() => setSaveToLibrary(!saveToLibrary)}\r\n                  disabled={downloading}\r\n                >\r\n                  <FaFolder />\r\n                  {saveToLibrary ? 'Salvar na Biblioteca' : 'Apenas Baixar'}\r\n                </DownloadButton>\r\n              </DownloadOptions>\r\n            </VideoInfo>\r\n          )}\r\n\r\n          {videoInfo && videoInfo.type === 'playlist' && (\r\n            <VideoInfo>\r\n              <PlaylistInfo>\r\n                <h3>\r\n                  <FaList />\r\n                  Playlist: {videoInfo.title}\r\n                </h3>\r\n                <p>Total de vídeos: {videoInfo.totalVideos}</p>\r\n              </PlaylistInfo>\r\n\r\n              <VideoList>\r\n                {videoInfo.videos.map((video, index) => (\r\n                  <VideoItem key={video.id}>\r\n                    <img src={video.thumbnail} alt={video.title} />\r\n                    <div>\r\n                      <h4>{index + 1}. {video.title}</h4>\r\n                      <p>Duração: {formatDuration(video.duration)}</p>\r\n                    </div>\r\n                  </VideoItem>\r\n                ))}\r\n              </VideoList>\r\n\r\n              <QualitySection>\r\n                <h3>Qualidade do Download</h3>\r\n                <QualityOptions>\r\n                  <QualityOption selected={selectedQuality === 'best'}>\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"quality\"\r\n                      value=\"best\"\r\n                      checked={selectedQuality === 'best'}\r\n                      onChange={(e) => setSelectedQuality(e.target.value)}\r\n                    />\r\n                    <span>Melhor Qualidade</span>\r\n                  </QualityOption>\r\n                  <QualityOption selected={selectedQuality === '720p'}>\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"quality\"\r\n                      value=\"720p\"\r\n                      checked={selectedQuality === '720p'}\r\n                      onChange={(e) => setSelectedQuality(e.target.value)}\r\n                    />\r\n                    <span>720p (HD)</span>\r\n                  </QualityOption>\r\n                  <QualityOption selected={selectedQuality === '480p'}>\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"quality\"\r\n                      value=\"480p\"\r\n                      checked={selectedQuality === '480p'}\r\n                      onChange={(e) => setSelectedQuality(e.target.value)}\r\n                    />\r\n                    <span>480p</span>\r\n                  </QualityOption>\r\n                </QualityOptions>\r\n              </QualitySection>\r\n\r\n              <DownloadOptions>\r\n                <DownloadButton\r\n                  primary\r\n                  onClick={() => handleDownload(true)}\r\n                  disabled={downloading}\r\n                >\r\n                  <FaDownload />\r\n                  {downloading ? 'Baixando Playlist...' : 'Baixar Toda a Playlist'}\r\n                </DownloadButton>\r\n                <DownloadButton\r\n                  onClick={() => setSaveToLibrary(!saveToLibrary)}\r\n                  disabled={downloading}\r\n                >\r\n                  <FaFolder />\r\n                  {saveToLibrary ? 'Salvar na Biblioteca' : 'Apenas Baixar'}\r\n                </DownloadButton>\r\n              </DownloadOptions>\r\n            </VideoInfo>\r\n          )}\r\n\r\n          {downloading && (\r\n            <ProgressSection>\r\n              <h3>Progresso do Download</h3>\r\n              <ProgressBar>\r\n                <ProgressFill progress={downloadProgress}>\r\n                  {downloadProgress.toFixed(0)}%\r\n                </ProgressFill>\r\n              </ProgressBar>\r\n              <ProgressInfo>\r\n                <span>\r\n                  <FaSpinner className=\"spin\" />\r\n                  Baixando...\r\n                </span>\r\n                <span>{downloadProgress.toFixed(0)}% completo</span>\r\n              </ProgressInfo>\r\n            </ProgressSection>\r\n          )}\r\n        </DownloadContainer>\r\n      </MainContent>\r\n    </PageContainer>\r\n  );\r\n}\r\n\r\nexport default DownloadPage;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SACEC,SAAS,EAAEC,UAAU,EAAEC,SAAS,EAAEC,OAAO,EAAEC,OAAO,EAClDC,OAAO,EAAEC,MAAM,EAAEC,OAAO,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,YAAY,QAClD,gBAAgB;AACvB,OAAOC,GAAG,MAAM,iBAAiB;AACjC,OAAOC,MAAM,MAAM,sBAAsB;AACzC,OAAOC,OAAO,MAAM,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,MAAMC,aAAa,GAAGjB,MAAM,CAACkB,GAAG;AAChC;AACA;AACA;AACA,CAAC;AAACC,EAAA,GAJIF,aAAa;AAMnB,MAAMG,WAAW,GAAGpB,MAAM,CAACqB,IAAI;AAC/B;AACA,iBAAiBC,KAAK,IAAIA,KAAK,CAACC,WAAW,GAAG,OAAO,GAAG,MAAM;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAXIJ,WAAW;AAajB,MAAMK,iBAAiB,GAAGzB,MAAM,CAACkB,GAAG;AACpC;AACA;AACA,CAAC;AAACQ,GAAA,GAHID,iBAAiB;AAKvB,MAAME,KAAK,GAAG3B,MAAM,CAAC4B,EAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAVIF,KAAK;AAYX,MAAMG,eAAe,GAAG9B,MAAM,CAACkB,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA,CAAC;AAACa,GAAA,GANID,eAAe;AAQrB,MAAME,UAAU,GAAGhC,MAAM,CAACkB,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACe,GAAA,GARID,UAAU;AAUhB,MAAME,QAAQ,GAAGlC,MAAM,CAACmC,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAhBIF,QAAQ;AAkBd,MAAMG,aAAa,GAAGrC,MAAM,CAACsC,MAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAtBIF,aAAa;AAwBnB,MAAMG,SAAS,GAAGxC,MAAM,CAACkB,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA,CAAC;AAACuB,GAAA,GANID,SAAS;AAQf,MAAME,WAAW,GAAG1C,MAAM,CAACkB,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACyB,GAAA,GARID,WAAW;AAUjB,MAAME,SAAS,GAAG5C,MAAM,CAAC6C,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAVIF,SAAS;AAYf,MAAMG,YAAY,GAAG/C,MAAM,CAACkB,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC8B,IAAA,GApBID,YAAY;AAsBlB,MAAME,WAAW,GAAGjD,MAAM,CAACkB,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACgC,IAAA,GATID,WAAW;AAWjB,MAAME,cAAc,GAAGnD,MAAM,CAACkB,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACkC,IAAA,GAPID,cAAc;AASpB,MAAME,cAAc,GAAGrD,MAAM,CAACkB,GAAG;AACjC;AACA;AACA;AACA,CAAC;AAACoC,IAAA,GAJID,cAAc;AAMpB,MAAME,aAAa,GAAGvD,MAAM,CAACwD,KAAK;AAClC;AACA;AACA;AACA,sBAAsBlC,KAAK,IAAIA,KAAK,CAACmC,QAAQ,GAAG,SAAS,GAAG,SAAS;AACrE;AACA;AACA;AACA,gBAAgBnC,KAAK,IAAIA,KAAK,CAACmC,QAAQ,GAAG,SAAS,GAAG,OAAO;AAC7D;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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}